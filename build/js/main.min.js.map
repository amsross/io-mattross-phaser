{"version":3,"file":"main.min.js","sources":["../../assets/js/game.js"],"names":["w","window","innerWidth","devicePixelRatio","h","innerHeight","coins","cursors","layer","layer_foreground","layer_collision","map","player","score","scoreText","game","Phaser","Game","AUTO","preload","load","tilemap","Tilemap","TILED_JSON","image","spritesheet","create","input","keyboard","createCursorKeys","stage","backgroundColor","physics","startSystem","Physics","ARCADE","add","addTilesetImage","createLayer","resizeWorld","visible","setCollision","sprite","world","height","camera","follow","arcade","enable","body","debug","bounce","y","gravity","collideWorldBounds","anchor","setTo","animations","collectStar","coin","kill","text","group","enableBody","i","Math","random","play","fontSize","fill","update","collide","overlap","this","velocity","x","left","isDown","scale","right","stop","frame","up","touching","down","blocked","ceil","console","log"],"mappings":"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","sourcesContent":["/* global Phaser */\r\n'use strict';\r\nvar w = window.innerWidth * window.devicePixelRatio,\r\n\th = window.innerHeight * window.devicePixelRatio;\r\n\r\nvar\r\n\tcoins,\r\n\tcursors,\r\n\tlayer,\r\n\tlayer_foreground,\r\n\tlayer_collision,\r\n\tmap,\r\n\tplayer,\r\n\tscore = 0,\r\n\tscoreText,\r\n\t// game = new Phaser.Game(800, 600, Phaser.AUTO, '', {\r\n\t// game = new Phaser.Game(480, 320, Phaser.AUTO, '', {\r\n\tgame = new Phaser.Game((h > w) ? h : w, (h > w) ? w : h, Phaser.AUTO, '', {\r\n\t\tpreload: function () {\r\n\t\t\tgame.load.tilemap('mario', 'assets/img/maps/smb_1_1.json', null, Phaser.Tilemap.TILED_JSON);\r\n\t\t\tgame.load.image('tiles', 'assets/img/tiles/smb_1_1.png');\r\n\t\t\tgame.load.image('metatiles', 'assets/img/tiles/metatiles16x16.png');\r\n\t\t\tgame.load.spritesheet('coin', 'assets/img/sprites/smb_coin.png', 16, 16);\r\n\t\t\tgame.load.spritesheet('bmo', 'assets/img/sprites/bmo.png', 32, 32);\r\n\t\t},\r\n\t\tcreate: function () {\r\n\r\n\t\t\tcursors = game.input.keyboard.createCursorKeys();\r\n\r\n\t\t\tgame.stage.backgroundColor = '#6b8cff';\r\n\t\t\tgame.physics.startSystem(Phaser.Physics.ARCADE);\r\n\r\n\t\t\tmap = game.add.tilemap('mario');\r\n\t\t\tmap.addTilesetImage('smb_1_1', 'tiles');\r\n\t\t\tmap.addTilesetImage('metatiles16x16', 'metatiles');\r\n\r\n\t\t\tlayer_collision = map.createLayer('collision');\r\n\t\t\tlayer_collision.resizeWorld();\r\n\t\t\tlayer_collision.visible = false;\r\n\t\t\tmap.setCollision(41, true, layer_collision, true);\r\n\t\t\tmap.setCollision(42, true, layer_collision, true);\r\n\r\n\t\t\tlayer = map.createLayer('background');\r\n\t\t\tlayer.resizeWorld();\r\n\r\n\t\t\tplayer = game.add.sprite(32, game.world.height - 150, 'bmo');\r\n\r\n\t\t\tgame.camera.follow(player);\r\n\t\t\tgame.physics.arcade.enable(player);\r\n\r\n\t\t\tplayer.body.debug = true;\r\n\t\t\tplayer.body.bounce.y = 0;\r\n\t\t\tplayer.body.gravity.y = 600;\r\n\t\t\tplayer.body.collideWorldBounds = true;\r\n\t\t\tplayer.anchor.setTo(0.5, 1);\r\n\t\t\tplayer.animations.add('walk', [0, 1, 2, 3, 4, 5, 6, 7], 10, true);\r\n\t\t\tplayer.collectStar = function(player, coin) {\r\n\t\t\t\t// Removes the coin from the screen\r\n\t\t\t\tcoin.kill();\r\n\r\n\t\t\t\t// Add and update the score\r\n\t\t\t\tscore += 10;\r\n\t\t\t\tscoreText.text = 'Score: ' + score;\r\n\t\t\t};\r\n\r\n\t\t\tlayer_foreground = map.createLayer('foreground');\r\n\t\t\tlayer_foreground.resizeWorld();\r\n\r\n\t\t\tcoins = game.add.group();\r\n\t\t\tcoins.enableBody = true;\r\n\r\n\t\t\t// Here we'll create 12 of them evenly spaced apart\r\n\t\t\tfor (var i = 0; i < 12; i++) {\r\n\t\t\t\t// Create a coin inside of the 'coins' group\r\n\t\t\t\tvar coin = coins.create(i * 70, 0, 'coin', 0);\r\n\r\n\t\t\t\tgame.physics.arcade.enable(coin);\r\n\r\n\t\t\t\tcoin.body.collideWorldBounds = true;\r\n\t\t\t\tcoin.body.gravity.y = 250 + Math.random() * 0.75;\r\n\t\t\t\tcoin.body.bounce.y = 0.6 + Math.random() * 0.2;\r\n\t\t\t\tcoin.animations.add('blink', [0, 1, 2], 5, true);\r\n\t\t\t\tcoin.animations.play('blink');\r\n\t\t\t}\r\n\r\n\t\t\tscoreText = game.add.text(16, 16, 'Score: 0', { fontSize: '32px', fill: '#fff' });\r\n\t\t},\r\n\t\tupdate: function () {\r\n\t\t\t// Collide the player and the coins\r\n\t\t\tgame.physics.arcade.collide(coins, coins);\r\n\t\t\tgame.physics.arcade.collide(coins, layer_collision);\r\n\t\t\tgame.physics.arcade.collide(player, layer_collision);\r\n\t\t\tgame.physics.arcade.overlap(player, coins, player.collectStar, null, this);\r\n\r\n\t\t\t// Reset the players velocity (movement)\r\n\t\t\tplayer.body.velocity.x = 0;\r\n\r\n\t\t\tif (cursors.left.isDown) {\r\n\t\t\t\t// Move to the left\r\n\t\t\t\tplayer.body.velocity.x = -150;\r\n\t\t\t\tplayer.animations.play('walk');\r\n\t\t\t\tplayer.scale.x = -1;\r\n\t\t\t} else if (cursors.right.isDown) {\r\n\t\t\t\t// Move to the right\r\n\t\t\t\tplayer.body.velocity.x = 150;\r\n\t\t\t\tplayer.animations.play('walk');\r\n\t\t\t\tplayer.scale.x = 1;\r\n\t\t\t} else {\r\n\t\t\t\t// Stand still\r\n\t\t\t\tplayer.animations.stop();\r\n\t\t\t\tplayer.frame = 1;\r\n\t\t\t}\r\n\r\n\t\t\t// Allow the player to jump if they are touching the ground or the bottom of the screen\r\n\t\t\tif (cursors.up.isDown && (player.body.touching.down || player.body.blocked.down || Math.ceil(player.y) === game.world.height)) {\r\n\t\t\t\tplayer.body.velocity.y = -350;\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t;\r\n\r\nconsole.log(game);\r\n"]}